{"version":3,"file":"app.js","sources":["../node_modules/smart-table-events/dist/bundle/module.js","../src/app/services/store.js","../src/app/services/navigation.js","../src/app/components/toolbar.js","../src/app/components/tool-drawer.js","../src/app/index.js"],"sourcesContent":["const emitter = () => {\n    const listenersLists = {};\n    const instance = {\n        on(event, ...listeners) {\n            listenersLists[event] = (listenersLists[event] || []).concat(listeners);\n            return instance;\n        },\n        dispatch(event, ...args) {\n            const listeners = listenersLists[event] || [];\n            for (const listener of listeners) {\n                listener(...args);\n            }\n            return instance;\n        },\n        off(event, ...listeners) {\n            if (event === undefined) {\n                Object.keys(listenersLists).forEach(ev => instance.off(ev));\n            }\n            else {\n                const list = listenersLists[event] || [];\n                listenersLists[event] = listeners.length ? list.filter(listener => !listeners.includes(listener)) : [];\n            }\n            return instance;\n        }\n    };\n    return instance;\n};\nconst proxyListener = (eventMap) => ({ emitter }) => {\n    const eventListeners = {};\n    const proxy = {\n        off(ev) {\n            if (!ev) {\n                Object.keys(eventListeners).forEach(eventName => proxy.off(eventName));\n            }\n            if (eventListeners[ev]) {\n                emitter.off(ev, ...eventListeners[ev]);\n            }\n            return proxy;\n        }\n    };\n    for (const ev of Object.keys(eventMap)) {\n        const method = eventMap[ev];\n        eventListeners[ev] = [];\n        proxy[method] = function (...listeners) {\n            eventListeners[ev] = eventListeners[ev].concat(listeners);\n            emitter.on(ev, ...listeners);\n            return proxy;\n        };\n    }\n    return proxy;\n};\n\nexport { emitter, proxyListener };\n","import { emitter } from 'smart-table-events';\nexport var Events;\n(function (Events) {\n    Events[\"TOOL_CHANGED\"] = \"TOOL_CHANGED\";\n})(Events || (Events = {}));\nexport const defaultState = () => {\n    return {\n        tool: {\n            selectedTool: null\n        }\n    };\n};\nexport const provider = () => {\n    const eventEmitter = emitter();\n    let state = defaultState();\n    return {\n        selectTool(tool) {\n            state.tool.selectedTool = tool;\n            eventEmitter.dispatch(Events.TOOL_CHANGED, state.tool);\n        },\n        on(event, cb) {\n            eventEmitter.on(event, cb);\n        },\n        getState() {\n            return JSON.parse(JSON.stringify(state));\n        }\n    };\n};\nexport default provider();\n","import { Events } from './store';\nimport defaultStore from './store';\nexport var ToolItem;\n(function (ToolItem) {\n    ToolItem[\"ITINERARY\"] = \"ITINERARY\";\n    ToolItem[\"SEARCH\"] = \"SEARCH\";\n})(ToolItem || (ToolItem = {}));\nexport const provider = (store) => {\n    let currentTool = null;\n    store.on(Events.TOOL_CHANGED, (state) => {\n        currentTool = state.selectedTool;\n    });\n    return {\n        selectTool(tool) {\n            if (tool !== currentTool) {\n                store.selectTool(tool);\n            }\n        },\n        unselectAll() {\n            this.selectTool(null);\n        }\n    };\n};\nexport default provider(defaultStore);\n","import { ToolItem } from '../services/navigation';\nimport { Events } from '../services/store';\nconst template = `<ul>\n<li>\n    <button>Itinerary</button>\n</li>\n<li>\n    <button>Search</button>\n</li>\n</ul>\n`;\nexport const component = (store, navigation) => {\n    const domElement = document.createElement('DIV');\n    domElement.classList.add('tools-bar');\n    domElement.innerHTML = template;\n    const [itenerary, search] = Array.from(domElement.querySelectorAll('button'));\n    itenerary.addEventListener('click', ev => {\n        navigation.selectTool(ToolItem.ITINERARY);\n    });\n    search.addEventListener('click', ev => {\n        navigation.selectTool(ToolItem.SEARCH);\n    });\n    store.on(Events.TOOL_CHANGED, (state) => {\n        const { selectedTool } = state;\n        itenerary.parentElement.classList.toggle('selected', selectedTool === ToolItem.ITINERARY);\n        search.parentElement.classList.toggle('selected', selectedTool === ToolItem.SEARCH);\n    });\n    return domElement;\n};\n","import { Events } from '../services/store';\nexport const template = `<div id=\"tools-content\">\n<button>close</button>\n<p>Hello tool</p>\n</div>`;\nexport const component = (store, navigation) => {\n    const domElement = document.createElement('DIV');\n    domElement.classList.add('closed');\n    domElement.setAttribute('id', 'tools-container');\n    domElement.innerHTML = template;\n    const closeButton = domElement.querySelector('button');\n    closeButton.addEventListener('click', () => navigation.unselectAll());\n    store.on(Events.TOOL_CHANGED, (state) => {\n        const { selectedTool } = state;\n        const isOpen = selectedTool !== null;\n        domElement.classList.toggle('closed', isOpen === false);\n    });\n    return domElement;\n};\n","import store from './services/store';\nimport navigation from './services/navigation';\nimport { component as toolbarFactory } from './components/toolbar';\nimport { component as toolDrawerFactory } from './components/tool-drawer';\nconst drawer = toolDrawerFactory(store, navigation);\nconst toolbar = toolbarFactory(store, navigation);\ndrawer.appendChild(toolbar);\nconst body = document.querySelector('body');\nconst mapContainer = document.getElementById('map-container');\nbody.insertBefore(drawer, mapContainer);\n"],"names":["provider","navigation","template","component","toolDrawerFactory","store","toolbarFactory"],"mappings":"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"}