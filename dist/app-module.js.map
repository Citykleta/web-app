{"version":3,"file":"app-module.js","sources":["../node_modules/smart-table-events/dist/bundle/module.js","../src/app/services/store.js","../src/app/services/navigation.js","../src/app/components/toolbar.js","../src/app/components/tool-drawer.js","../src/app/index.js"],"sourcesContent":["const emitter = () => {\n    const listenersLists = {};\n    const instance = {\n        on(event, ...listeners) {\n            listenersLists[event] = (listenersLists[event] || []).concat(listeners);\n            return instance;\n        },\n        dispatch(event, ...args) {\n            const listeners = listenersLists[event] || [];\n            for (const listener of listeners) {\n                listener(...args);\n            }\n            return instance;\n        },\n        off(event, ...listeners) {\n            if (event === undefined) {\n                Object.keys(listenersLists).forEach(ev => instance.off(ev));\n            }\n            else {\n                const list = listenersLists[event] || [];\n                listenersLists[event] = listeners.length ? list.filter(listener => !listeners.includes(listener)) : [];\n            }\n            return instance;\n        }\n    };\n    return instance;\n};\nconst proxyListener = (eventMap) => ({ emitter }) => {\n    const eventListeners = {};\n    const proxy = {\n        off(ev) {\n            if (!ev) {\n                Object.keys(eventListeners).forEach(eventName => proxy.off(eventName));\n            }\n            if (eventListeners[ev]) {\n                emitter.off(ev, ...eventListeners[ev]);\n            }\n            return proxy;\n        }\n    };\n    for (const ev of Object.keys(eventMap)) {\n        const method = eventMap[ev];\n        eventListeners[ev] = [];\n        proxy[method] = function (...listeners) {\n            eventListeners[ev] = eventListeners[ev].concat(listeners);\n            emitter.on(ev, ...listeners);\n            return proxy;\n        };\n    }\n    return proxy;\n};\n\nexport { emitter, proxyListener };\n","import { emitter } from 'smart-table-events';\nexport var Events;\n(function (Events) {\n    Events[\"TOOL_CHANGED\"] = \"TOOL_CHANGED\";\n})(Events || (Events = {}));\nexport const defaultState = () => {\n    return {\n        tool: {\n            selectedTool: null\n        }\n    };\n};\nexport const provider = () => {\n    const eventEmitter = emitter();\n    let state = defaultState();\n    return {\n        selectTool(tool) {\n            state.tool.selectedTool = tool;\n            eventEmitter.dispatch(Events.TOOL_CHANGED, state.tool);\n        },\n        on(event, cb) {\n            eventEmitter.on(event, cb);\n        },\n        getState() {\n            return JSON.parse(JSON.stringify(state));\n        }\n    };\n};\nexport default provider();\n","import { Events } from './store';\nimport defaultStore from './store';\nexport var ToolItem;\n(function (ToolItem) {\n    ToolItem[\"ITINERARY\"] = \"ITINERARY\";\n    ToolItem[\"SEARCH\"] = \"SEARCH\";\n})(ToolItem || (ToolItem = {}));\nexport const provider = (store) => {\n    let currentTool = null;\n    store.on(Events.TOOL_CHANGED, (state) => {\n        currentTool = state.selectedTool;\n    });\n    return {\n        selectTool(tool) {\n            if (tool !== currentTool) {\n                store.selectTool(tool);\n            }\n        },\n        unselectAll() {\n            this.selectTool(null);\n        }\n    };\n};\nexport default provider(defaultStore);\n","import { ToolItem } from '../services/navigation';\nimport { Events } from '../services/store';\nconst template = `<ul>\n<li>\n    <button>Itinerary</button>\n</li>\n<li>\n    <button>Search</button>\n</li>\n</ul>\n`;\nexport const component = (store, navigation) => {\n    const domElement = document.createElement('DIV');\n    domElement.classList.add('tools-bar');\n    domElement.innerHTML = template;\n    const [itenerary, search] = Array.from(domElement.querySelectorAll('button'));\n    itenerary.addEventListener('click', ev => {\n        navigation.selectTool(ToolItem.ITINERARY);\n    });\n    search.addEventListener('click', ev => {\n        navigation.selectTool(ToolItem.SEARCH);\n    });\n    store.on(Events.TOOL_CHANGED, (state) => {\n        const { selectedTool } = state;\n        itenerary.parentElement.classList.toggle('selected', selectedTool === ToolItem.ITINERARY);\n        search.parentElement.classList.toggle('selected', selectedTool === ToolItem.SEARCH);\n    });\n    return domElement;\n};\n","import { Events } from '../services/store';\nexport const template = `<div id=\"tools-content\">\n<button>close</button>\n<p>Hello tool</p>\n</div>`;\nexport const component = (store, navigation) => {\n    const domElement = document.createElement('DIV');\n    domElement.classList.add('closed');\n    domElement.setAttribute('id', 'tools-container');\n    domElement.innerHTML = template;\n    const closeButton = domElement.querySelector('button');\n    closeButton.addEventListener('click', () => navigation.unselectAll());\n    store.on(Events.TOOL_CHANGED, (state) => {\n        const { selectedTool } = state;\n        const isOpen = selectedTool !== null;\n        domElement.classList.toggle('closed', isOpen === false);\n    });\n    return domElement;\n};\n","import store from './services/store';\nimport navigation from './services/navigation';\nimport { component as toolbarFactory } from './components/toolbar';\nimport { component as toolDrawerFactory } from './components/tool-drawer';\nconst drawer = toolDrawerFactory(store, navigation);\nconst toolbar = toolbarFactory(store, navigation);\ndrawer.appendChild(toolbar);\nconst body = document.querySelector('body');\nconst mapContainer = document.getElementById('map-container');\nbody.insertBefore(drawer, mapContainer);\n"],"names":["provider","navigation","template","component","toolDrawerFactory","store","toolbarFactory"],"mappings":"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"}