{"version":3,"file":"map.js","sources":["../../src/app/map/service.js","../../src/app/map/tools/map-tool-box.js","../../node_modules/smart-table-events/dist/bundle/module.js","../../src/app/map/canvas-interactions.js","../../src/app/map/tools/search-tool.js","../../src/app/map/elements/map.js","../../src/app/map/module.js","../../src/app/map/index.js"],"sourcesContent":["import { updateMapPosition } from './actions';\nconst mapActions = {\n    updateMapPosition: updateMapPosition\n};\nexport const provider = (store, { updateMapPosition } = mapActions) => {\n    return {\n        updateCamera(state) {\n            store.dispatch(updateMapPosition(state));\n        }\n    };\n};\n","export const factory = () => {\n    const toolBox = new Map();\n    let currentTool = null;\n    return {\n        selectTool(view) {\n            currentTool = toolBox.get(view);\n            return this;\n        },\n        addTool(view, tool) {\n            toolBox.set(view, tool);\n            return this;\n        },\n        async clickAction(ev) {\n            if (currentTool && typeof currentTool.clickAction === 'function') {\n                currentTool.clickAction(ev);\n            }\n        },\n        async longClickAction(ev) {\n            if (currentTool && typeof currentTool.longClickAction === 'function') {\n                currentTool.longClickAction(ev);\n            }\n        }\n    };\n};\n","const emitter = () => {\n    const listenersLists = {};\n    const instance = {\n        on(event, ...listeners) {\n            listenersLists[event] = (listenersLists[event] || []).concat(listeners);\n            return instance;\n        },\n        dispatch(event, ...args) {\n            const listeners = listenersLists[event] || [];\n            for (const listener of listeners) {\n                listener(...args);\n            }\n            return instance;\n        },\n        off(event, ...listeners) {\n            if (event === undefined) {\n                Object.keys(listenersLists).forEach(ev => instance.off(ev));\n            }\n            else {\n                const list = listenersLists[event] || [];\n                listenersLists[event] = listeners.length ? list.filter(listener => !listeners.includes(listener)) : [];\n            }\n            return instance;\n        }\n    };\n    return instance;\n};\nconst proxyListener = (eventMap) => ({ emitter }) => {\n    const eventListeners = {};\n    const proxy = {\n        off(ev) {\n            if (!ev) {\n                Object.keys(eventListeners).forEach(eventName => proxy.off(eventName));\n            }\n            if (eventListeners[ev]) {\n                emitter.off(ev, ...eventListeners[ev]);\n            }\n            return proxy;\n        }\n    };\n    for (const ev of Object.keys(eventMap)) {\n        const method = eventMap[ev];\n        eventListeners[ev] = [];\n        proxy[method] = function (...listeners) {\n            eventListeners[ev] = eventListeners[ev].concat(listeners);\n            emitter.on(ev, ...listeners);\n            return proxy;\n        };\n    }\n    return proxy;\n};\n\nexport { emitter, proxyListener };\n","import { emitter, proxyListener } from 'smart-table-events';\nexport const LONG_PRESS_TIME = 300;\nexport const isSameLocation = (pos1, pos2) => {\n    return pos1.lat === pos2.lat && pos1.lng === pos2.lng;\n};\nexport const factory = (source) => {\n    let mouseDownTime = null;\n    let mouseDownPosition = null;\n    const proxy = emitter();\n    const proxyFactory = proxyListener({\n        [\"CLICK_EVENT\" /* CLICK_EVENT */]: 'onClick',\n        [\"LONG_CLICK_EVENT\" /* LONG_CLICK_EVENT */]: 'onLongClick'\n    });\n    //@ts-ignore\n    const instance = proxyFactory({ emitter: proxy });\n    //@ts-ignore\n    source.addEventListener('mousedown', (ev) => {\n        mouseDownTime = Date.now();\n        mouseDownPosition = ev.lngLat;\n    });\n    //@ts-ignore\n    source.addEventListener('mouseup', (ev) => {\n        try {\n            const mouseUpTime = Date.now();\n            if (isSameLocation(mouseDownPosition, ev.lngLat)) {\n                const eventName = (mouseUpTime - mouseDownTime) < LONG_PRESS_TIME ?\n                    \"CLICK_EVENT\" /* CLICK_EVENT */ :\n                    \"LONG_CLICK_EVENT\" /* LONG_CLICK_EVENT */;\n                proxy.dispatch(eventName, ev);\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n        finally {\n            mouseDownTime = null;\n            mouseDownPosition = null;\n        }\n    });\n    return instance;\n};\n","import { createGeoCoord } from '../../utils';\nexport const searchViewTool = (registry) => {\n    return {\n        async clickAction(ev) {\n            const searchService = registry.get('search');\n            const { result } = await searchService.searchPointOfInterestNearBy(ev.lngLat);\n            if (result.length) {\n                searchService.selectSearchResult(result[0]);\n            }\n        },\n        async longClickAction(ev) {\n            const searchService = registry.get('search');\n            searchService.searchPointOfInterest('');\n            searchService.selectSearchResult(createGeoCoord(ev.lngLat.lng, ev.lngLat.lat));\n        }\n    };\n};\n","import { html } from 'lit-html';\nimport mapboxconf from '../../../conf/mapbox';\nimport { LitElement } from 'lit-element';\nimport { itineraryToGeoJSON, leisureToGeoJSON, suggestionsToGeoJSON } from '../utils';\nimport { factory } from '../tools/map-tool-box';\nimport { factory as canvasInteractions } from '../canvas-interactions';\nimport { View } from '../../navigation/reducer';\nimport { searchViewTool } from '../tools/search-tool';\nconst ACCESS_TOKEN = mapboxconf.accessToken;\nconst STYLE_URL = mapboxconf.style;\nexport const template = ({ zoom, center, suggestions, itinerary, leisure, onCameraChange, selectSuggestion, selectItineraryRoute }) => {\n    return html `\n<mb-map @camera-change=\"${onCameraChange}\" center=\"${center.join(',')}\" zoom=\"${zoom}\" access-token=\"${ACCESS_TOKEN}\" mb-style=\"${STYLE_URL}\">\n    <mb-geojson .data=\"${suggestions}\" source-id=\"suggestions\">\n        <mb-circle-layer @click=\"${selectSuggestion}\" layer-id=\"suggestions-point\"\n            filter=\"['==','$type','Point']\"\n            circle-color=\"#55B2FF\" \n            circle-radius=\"8\"\n            circle-stroke-width=\"['case',['get','selected'],4,2]\" \n            circle-stroke-color=\"['case',['get','selected'],'#55b2ff','#ff426f']\" \n            circle-opacity=\"0.2\"></mb-circle-layer>\n        <mb-line-layer @click=\"${selectSuggestion}\" layer-id=\"suggestions-line\"\n            line-color=\"['case',['get','selected'],'#55b2ff','#ff426f']\"\n            line-opacity=\"0.7\"\n            line-gap-width=\"['case',['get','selected'],4,1]\"\n            line-width=\"['case',['get','selected'],7,5]\"></mb-line-layer>\n    </mb-geojson>\n    <mb-geojson .data=\"${leisure}\" source-id=\"leisure\">\n        <mb-circle-layer  layer-id=\"leisure-point\"\n            filter=\"['==','$type','Point']\"\n            circle-color=\"green\"\n            circle-radius=\"8\"\n            circle-stroke-width=\"2\"\n            circle-stroke-color=\"green\"\n            circle-opacity=\"0.2\"></mb-circle-layer>\n        <mb-line-layer  layer-id=\"leisure-line\"\n            line-color=\"green\"\n            line-opacity=\"1\"\n            line-width=\"5\"></mb-line-layer>\n        <mb-symbol-layer  layer-id=\"leisure-label\"\n            filter=\"['==','$type','Point']\"\n            text-size=\"18\"\n            text-offset=\"[0, -0.4]\"\n            text-anchor=\"bottom\"\n            text-font=\"['Open Sans Bold']\"\n            text-field=\"['get', 'name']\"\n            text-color=\"green\"></mb-symbol-layer>\n    </mb-geojson>\n    <mb-geojson .data=\"${itinerary}\" source-id=\"itinerary\">\n        <mb-line-layer @click=\"${selectItineraryRoute}\" layer-id=\"itinerary-line\"\n            line-color=\"['case',['get','selected'],'#ff426f','gray']\"\n            line-opacity=\"['case',['get','selected'],1,0.6]\"\n            line-gap-width=\"['case',['get','selected'],2,0]\"\n            line-width=\"['case',['get','selected'],3,5]\"></mb-line-layer>\n        <mb-circle-layer source=\"itinerary\" layer-id=\"itinerary-point\"\n            filter=\"['==','$type','Point']\"\n            circle-color=\"#ff426f\"\n            circle-radius=\"8\"\n            circle-stroke-width=\"2\"\n            circle-stroke-color=\"#ff426f\"\n            circle-opacity=\"0.2\"></mb-circle-layer>\n    </mb-geojson>\n</mb-map>`;\n};\nexport const propDef = {\n    center: { type: Array, reflect: true },\n    zoom: { type: Number, reflect: true },\n    view: { type: String, reflect: true },\n    applicationState: { type: Object }\n};\nexport class GeoMap extends LitElement {\n    constructor(registy) {\n        super();\n        this._registry = registy;\n        this._toolBox = factory();\n        this._toolBox.addTool(View.SEARCH, searchViewTool(registy));\n    }\n    static get properties() {\n        return propDef;\n    }\n    attributeChangedCallback(name, old, value) {\n        super.attributeChangedCallback(name, old, value);\n        if (name === 'view') {\n            console.log('change tool');\n            this._toolBox.selectTool(value);\n        }\n    }\n    firstUpdated(_changedProperties) {\n        this._canvas = canvasInteractions(this.shadowRoot.querySelector('mb-map'));\n        this._canvas.onClick(ev => this._toolBox.clickAction(ev));\n        this._canvas.onLongClick(ev => this._toolBox.longClickAction(ev));\n    }\n    render() {\n        const selectSuggestion = ev => {\n            const { features } = ev;\n            const search = this._registry.get('search');\n            if (features && features.length) {\n                const { properties: { index } } = features[0];\n                search.selectSearchResult(this.applicationState.search.searchResult[index]);\n            }\n        };\n        const selectItineraryRoute = ev => {\n            const { features } = ev;\n            const itinerary = this._registry.get('itinerary');\n            if (features && features.length) {\n                const { properties: { index } } = features[0];\n                itinerary.selectRoute(index);\n            }\n        };\n        const onCameraChange = ev => this._registry.get('map').updateCamera({\n            zoom: ev.detail.zoom,\n            center: ev.detail.center\n        });\n        return template({\n            zoom: this.zoom,\n            center: this.center,\n            suggestions: suggestionsToGeoJSON(this.applicationState),\n            itinerary: itineraryToGeoJSON(this.applicationState),\n            leisure: leisureToGeoJSON(this.applicationState),\n            onCameraChange,\n            selectSuggestion,\n            selectItineraryRoute\n        });\n    }\n}\n","import { CircleLayer, GeoJSONSource, GeoMap as MbGeoMap, LineLayer, SymbolLayer } from '@citykleta/mb-gl-comp';\nimport { provider } from './service';\nimport { once } from '../utils';\nimport { GeoMap } from './elements/map';\nimport { reducer } from './reducer';\nimport store from '../store/index';\nimport { connect } from '../common/connect';\nexport const loadServices = once((registry, store) => {\n    store.injectReducer('map', reducer);\n    registry.set('map', provider(store));\n});\nexport const loadComponents = once((injector) => {\n    const connectedMap = connect(store, (state) => {\n        return {\n            ...state.map,\n            view: state.navigation.selectedView,\n            applicationState: state\n        };\n    });\n    customElements.define('mb-map', MbGeoMap);\n    customElements.define('mb-geojson', GeoJSONSource);\n    customElements.define('mb-circle-layer', CircleLayer);\n    customElements.define('mb-line-layer', LineLayer);\n    customElements.define('mb-symbol-layer', SymbolLayer);\n    customElements.define('citykleta-map', connectedMap(injector(GeoMap)));\n});\n","import { loadComponents, loadServices } from './module';\nimport { defaultInjector, defaultRegistry } from '../common';\nimport store from '../store/index';\nloadServices(defaultRegistry, store);\nloadComponents(defaultInjector);\n"],"names":["factory","canvasInteractions","MbGeoMap"],"mappings":"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"}