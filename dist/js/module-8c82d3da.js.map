{"version":3,"file":"module-8c82d3da.js","sources":["../../src/app/navigation/actions.js","../../src/app/navigation/service.js","../../src/app/navigation/elements/navigation-bar.style.js","../../src/app/navigation/elements/navigation-bar.js","../../src/app/navigation/module.js"],"sourcesContent":["import { ActionType } from '../common/actions';\nexport const selectView = (view) => ({\n    type: ActionType.SELECT_VIEW,\n    view\n});\n","import { selectView } from './actions';\nimport { changeHistoryPoint } from '../common/actions';\nimport { storage } from '../storage/url';\nconst navigationActions = {\n    selectView\n};\nexport const provider = (store, { selectView } = navigationActions) => {\n    const stateStorage = storage(window);\n    window.onpopstate = (ev) => {\n        const { state } = ev;\n        store.dispatch(changeHistoryPoint(state));\n    };\n    store.subscribe(async () => {\n        const state = store.getState();\n        await stateStorage.set(state);\n    });\n    return {\n        selectView(view) {\n            store.dispatch(selectView(view));\n        },\n        getView() {\n            return store.getState().navigation.selectedView;\n        }\n    };\n};\n","import { css } from 'lit-element';\n// language=CSS\nexport const style = css `:host {\n    --background: var(--background-theme-1);\n    font-weight: lighter;\n    font-size: 0.95rem;\n}\n\nul {\n    display: flex;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n\nli {\n    background: var(--background);\n    border-color: var(--background-theme-3, currentColor);\n    border-style: solid;\n    border-width: 2px 1px 0 0;\n    box-shadow: 0 0 2px 0 var(--background-theme-2) inset;\n    padding: 0.6em 2em;\n    transition: margin 0.3s;\n}\n\nli:last-child {\n    border-right-width: 0;\n}\n\nli.active {\n    --background: var(--background-theme);\n    border-top-color: var(--color-theme-1);\n    box-shadow: none;\n    font-weight: normal;\n    margin-top: -0.2rem;\n}`;\n","import { html, LitElement } from 'lit-element';\nimport { classMap } from 'lit-html/directives/class-map';\nimport { style } from './navigation-bar.style';\nimport { View } from '../reducer';\nconst navigationItem = (navigation) => ({ label, view }) => html `<li class=\"${classMap({ active: view === navigation.getView() })}\" @click=\"${() => navigation.selectView(view)}\">\n                ${label}\n            </li>`;\nconst navigationDefinition = [{\n        // @ts-ignore\n        label: 'Search',\n        view: View.SEARCH\n    }, {\n        // @ts-ignore\n        label: 'Itinerary',\n        view: View.ITINERARY\n    }, {\n        // @ts-ignore\n        label: 'Leisure',\n        view: View.LEISURE\n    }, {\n        // @ts-ignore\n        label: 'Settings',\n        view: View.SETTINGS\n    }];\nexport const template = ({ navigation }) => html `<ul>${navigationDefinition.map(navigationItem(navigation))}</ul>`;\nexport const propsDef = {\n    selectedView: { type: String, attribute: 'selected-view', reflect: true }\n};\nexport class NavigationBar extends LitElement {\n    constructor(serviceMap) {\n        super();\n        this._navigation = serviceMap.get('navigation');\n    }\n    static get styles() {\n        return style;\n    }\n    static get properties() {\n        return propsDef;\n    }\n    render() {\n        return template({ navigation: this._navigation });\n    }\n}\n","import { provider } from './service';\nimport { NavigationBar } from './elements/navigation-bar';\nimport { once } from '../utils';\nexport * from './service';\nexport * from './reducer';\nexport * from './actions';\nexport { NavigationBar } from './elements/navigation-bar';\nexport const loadServices = once((registry, store) => {\n    // todo register reducer\n    registry.set('navigation', provider(store));\n});\nexport const loadComponents = once((injector) => {\n    customElements.define('citykleta-navigation-bar', injector(NavigationBar));\n});\n"],"names":[],"mappings":"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"}