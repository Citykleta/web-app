{"version":3,"file":"search.js","sources":["../../src/app/search/elements/action-bar.style.js","../../src/app/search/elements/actions-bar.js","../../src/app/search/elements/search-panel.style.js","../../src/app/search/elements/search-panel.js","../../src/app/search/elements/location-details.style.js","../../src/app/search/elements/location-details.js","../../src/app/search/module.js"],"sourcesContent":["import { css } from 'lit-element';\n// language=CSS\nexport const style = css `\n    ul {\n        list-style: none;\n        margin: 0.5em;\n        padding: 0;\n        display: flex;\n        justify-content: center;\n    }\n\n    li {\n        text-align: center;\n        padding: 0.5em;\n    }\n\n    citykleta-button-icon {\n        --size: 5em;\n    }\n`;\n","import { html, LitElement } from 'lit-element';\nimport { style } from './action-bar.style';\nimport { View } from '../../navigation/module';\nexport const propDef = {\n    location: {\n        type: Object\n    }\n};\nexport const template = ({ goTo, goFrom }) => {\n    return html `<ul>\n<li><citykleta-button-icon @click=\"${goTo}\">Go To</citykleta-button-icon></li>\n<li><citykleta-button-icon @click=\"${goFrom}\">Go From</citykleta-button-icon></li>\n<li><citykleta-button-icon @click=\"${() => console.warn('not implemented')}\">Save</citykleta-button-icon></li>\n</ul>`;\n};\nexport class ActionsBar extends LitElement {\n    constructor(registry) {\n        super();\n        this.location = null;\n        this._itinerary = registry.get('itinerary');\n        this._navigation = registry.get('navigation');\n    }\n    static get styles() {\n        return style;\n    }\n    render() {\n        const goTo = () => {\n            this._itinerary.goTo(this.location);\n            this._navigation.selectView(View.ITINERARY);\n        };\n        const goFrom = () => {\n            this._itinerary.goFrom(this.location);\n            this._navigation.selectView(View.ITINERARY);\n        };\n        return template({\n            goTo,\n            goFrom\n        });\n    }\n}\n","import { css } from 'lit-element';\n// language=CSS\nexport const style = css `\n    citykleta-search-box,\n    citykleta-location {\n        background: var(--background-theme);\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12),\n        0 4px 4px rgba(0, 0, 0, 0.12),\n        0 6px 4px rgba(0, 0, 0, 0.12);\n    }\n    \n    citykleta-search-box{\n        max-height: 16em;\n    }\n\n    citykleta-location {\n        padding: 0 1em;\n    }\n    \n    :host > *:not(:first-child){\n        margin-top: 1em;\n    }\n`;\n","import { html, LitElement } from 'lit-element';\nimport { style } from './search-panel.style';\nimport { createSearchResultInstance } from './search-result';\nexport const template = ({ selectedSearchResult, isSearching, searchResult, onValue }) => {\n    return html `\n    <citykleta-search-box id=\"search-box\" .isBusy=\"${isSearching}\" .suggestions=\"${searchResult}\" .selectedSuggestion=\"${selectedSearchResult}\" @value-change=\"${onValue}\"></citykleta-search-box>\n    ${selectedSearchResult !== null ? createSearchResultInstance(selectedSearchResult).toDetailElement() : ''}\n`;\n};\nexport const propDef = {\n    searchResult: { type: Array },\n    selectedSearchResult: { type: Object },\n    isSearching: { type: Boolean }\n};\nexport class SearchPanel extends LitElement {\n    constructor(serviceRegistry) {\n        super();\n        this.isSearching = false;\n        this.selectedSearchResult = null;\n        this.searchResult = [];\n        this._search = null;\n        this._search = serviceRegistry.get('search');\n    }\n    static get styles() {\n        return style;\n    }\n    static get properties() {\n        return propDef;\n    }\n    render() {\n        return template({\n            isSearching: this.isSearching,\n            searchResult: this.searchResult,\n            selectedSearchResult: this.selectedSearchResult,\n            onValue: (ev) => {\n                this._search.selectSearchResult(ev.detail.value);\n            }\n        });\n    }\n}\n","import { css } from 'lit-element';\n// language=CSS\nexport const style = css `\n    h2 {\n        border-bottom: 2px solid var(--color-theme);\n    }\n\n    .location {\n        margin: 0;\n    }\n\n    .description {\n        font-size: 0.95em;\n        font-style: italic;\n    }\n\n    .location span:last-child {\n        font-weight: 300;\n        font-style: italic;\n        text-align: right;\n    }\n`;\n","import { html, LitElement } from 'lit-element';\nimport { style } from './location-details.style';\nimport { truncate } from '../../utils';\nimport { createSearchResultInstance } from './search-result';\nexport const template = ({ location: val }) => {\n    const searchResultInstance = createSearchResultInstance(val);\n    const center = searchResultInstance.toPoint();\n    return html `\n<article>\n    <h2><slot name=\"title\"><span>${val.name}</span></slot></h2>\n    <span>debug_category:${val.category}</span>\n    ${val.description ? html `<p class=\"description\">${val.description}</p>` : ''}\n    <address>\n        <slot name=\"address\">${html `<div>${searchResultInstance.toOptionElement()}</div>`}</slot>\n        <div class=\"location\">\n            <span>Location</span>:\n            <span>${truncate(center.lng)} / ${truncate(center.lat)}</span>\n        </div>\n    </address>\n<citykleta-actions-bar .location=\"${val}\"></citykleta-actions-bar>\n</article>`;\n};\nexport const propDef = {\n    location: {\n        type: Object\n    }\n};\nexport class LocationDetails extends LitElement {\n    constructor() {\n        super(...arguments);\n        this.location = null;\n    }\n    static get styles() {\n        return style;\n    }\n    static get properties() {\n        return propDef;\n    }\n    render() {\n        return template({ location: this.location });\n    }\n}\n","import { ActionsBar } from './elements/actions-bar';\nimport { SearchPanel } from './elements/search-panel';\nimport { once } from '../utils';\nimport { html } from 'lit-html';\nimport { LocationDetails } from './elements/location-details';\nimport { connect } from '../common/connect';\nimport store from '../store/index';\nimport { loadSearchItineraryComponents } from '../common';\nexport * from './actions';\nexport * from './reducers';\nexport * from './service';\nexport { ActionsBar } from './elements/actions-bar';\nexport { SearchBox } from './elements/search-box';\nexport { SearchPanel } from './elements/search-panel';\nexport * from './elements/search-result';\nexport { loadSearchItineraryServices as loadServices } from '../common/index';\nexport const loadComponents = once((injector) => {\n    const connectedSearchPanel = connect(store, (state) => state.search);\n    loadSearchItineraryComponents(injector);\n    customElements.define('citykleta-location', injector(LocationDetails));\n    customElements.define('citykleta-actions-bar', injector(ActionsBar));\n    customElements.define('citykleta-search-panel', connectedSearchPanel(injector(SearchPanel)));\n});\nexport const view = () => html `<citykleta-search-panel class=\"panel\"></citykleta-search-panel>`;\n"],"names":["style","template","propDef"],"mappings":"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"}